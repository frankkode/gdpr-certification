ðŸ§ª Testing database connection...
ðŸ”— Creating PostgreSQL connection pool...
ðŸ”§ Connection string exists: true
ðŸ”§ Connection string format: postgresql://postgre...
ðŸ”’ GDPR-Compliant Certificate System v4.0 (PostgreSQL) running on port 5000
âœ… Features: Privacy by Design, Zero Personal Data Storage, Auto-Compliance
ðŸ—„ï¸ Database: PostgreSQL on Railway
ðŸ”— Available at: http://localhost:5000
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 692, rows: 1 }
âœ… Database connection test successful!
â° Current time: 2025-06-26T08:57:54.757Z
ðŸ—„ï¸ PostgreSQL version: PostgreSQL 16.8 (Debian 16.8-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
ðŸ”„ Ensuring database tables exist...
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 70, rows: null }
âœ… GDPR-compliant certificate_hashes table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 68, rows: null }
âœ… GDPR-compliant audit_log table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 94, rows: null }
âœ… GDPR-compliant verification_attempts table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 73, rows: null }
âœ… GDPR-compliant users table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 67, rows: null }
âœ… GDPR-compliant user_sessions table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 80, rows: null }
âœ… Certificate templates table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 79, rows: null }
âœ… Payment transactions table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 65, rows: null }
âœ… User certificates table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 192, rows: null }
âœ… Bulk generation jobs table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 63, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 65, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 108, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 67, rows: null }
âœ… Bulk generation jobs table columns updated
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âŒ Query failed (3 retries left): constraint "valid_progress_check" for relation "bulk_generation_jobs" already exists
ðŸ”§ Query: 
        ALTER TABLE bulk_generation_jobs 
        ADD CONSTRAINT valid_progress_check CHECK(progress >= 0 AND progress <= 100);
      
ðŸ”§ Params: []
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âŒ Query failed (2 retries left): constraint "valid_progress_check" for relation "bulk_generation_jobs" already exists
ðŸ”§ Query: 
        ALTER TABLE bulk_generation_jobs 
        ADD CONSTRAINT valid_progress_check CHECK(progress >= 0 AND progress <= 100);
      
ðŸ”§ Params: []
ðŸ”„ Ensuring database tables exist...
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 875, rows: null }
âœ… GDPR-compliant certificate_hashes table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 87, rows: null }
âœ… GDPR-compliant audit_log table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 66, rows: null }
âœ… GDPR-compliant verification_attempts table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 64, rows: null }
âœ… GDPR-compliant users table verified/created
ðŸ”— Database connection acquired from pool
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
âœ… GDPR-compliant user_sessions table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âŒ Query failed (1 retries left): constraint "valid_progress_check" for relation "bulk_generation_jobs" already exists
ðŸ”§ Query: 
        ALTER TABLE bulk_generation_jobs 
        ADD CONSTRAINT valid_progress_check CHECK(progress >= 0 AND progress <= 100);
      
ðŸ”§ Params: []
â„¹ï¸ Progress constraint already exists or not needed
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 74, rows: null }
âœ… Certificate templates table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 70, rows: null }
âœ… Payment transactions table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 71, rows: null }
âœ… User certificates table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 100, rows: null }
âœ… Bulk generation jobs table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 69, rows: null }
ðŸ”— Database connection acquired from pool
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 412, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 859, rows: null }
âœ… Certificate usage tracking table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 75, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 71, rows: null }
âœ… Subscription plans table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 74, rows: null }
âœ… Bulk generation jobs table columns updated
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âŒ Query failed (3 retries left): constraint "valid_progress_check" for relation "bulk_generation_jobs" already exists
ðŸ”§ Query: 
        ALTER TABLE bulk_generation_jobs 
        ADD CONSTRAINT valid_progress_check CHECK(progress >= 0 AND progress <= 100);
      
ðŸ”§ Params: []
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 79, rows: null }
âœ… Coupon codes table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 84, rows: null }
âœ… Coupon usage tracking table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 63, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 61, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 64, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 69, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 65, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 89, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 58, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 63, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 61, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 69, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 76, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 75, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 86, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âŒ Query failed (2 retries left): constraint "valid_progress_check" for relation "bulk_generation_jobs" already exists
ðŸ”§ Query: 
        ALTER TABLE bulk_generation_jobs 
        ADD CONSTRAINT valid_progress_check CHECK(progress >= 0 AND progress <= 100);
      
ðŸ”§ Params: []
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 70, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 83, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 114, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 65, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 71, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 70, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 69, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 61, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 64, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 65, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 64, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 61, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âŒ Query failed (1 retries left): constraint "valid_progress_check" for relation "bulk_generation_jobs" already exists
ðŸ”§ Query: 
        ALTER TABLE bulk_generation_jobs 
        ADD CONSTRAINT valid_progress_check CHECK(progress >= 0 AND progress <= 100);
      
ðŸ”§ Params: []
â„¹ï¸ Progress constraint already exists or not needed
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 104, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 71, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 78, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 61, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 76, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
âœ… 51/51 GDPR-compliant indexes processed
ðŸ”— Database connection acquired from pool
âœ… Connected to PostgreSQL database on Railway
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 84, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 570, rows: null }
âœ… Certificate usage tracking table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 78, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 73, rows: null }
âœ… Subscription plans table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 75, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 70, rows: null }
âœ… Coupon codes table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 73, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 67, rows: null }
âœ… Coupon usage tracking table verified/created
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 70, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 76, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 61, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 74, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 90, rows: null }
âœ… Payment transactions table updated for coupon support
ðŸ—„ï¸ GDPR-Compliant PostgreSQL Database initialized successfully
ðŸ“Š Enhanced features: Zero Personal Data, Hash-Only Storage, Auto-Compliance
âœ… GDPR Articles 5 & 17 Compliant by Design
ðŸ—„ï¸ Database initialization completed successfully
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 63, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 63, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 65, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 59, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 89, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 60, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 62, rows: null }
ðŸ”— Database connection acquired from pool
ðŸ”“ Database connection released to pool
âœ… Query executed { duration: 53, rows: null }
ðŸ”— Database connection acquired from pool
